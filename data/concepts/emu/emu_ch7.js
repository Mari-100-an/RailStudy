/**
 * 전기동차 구조 및 기능 - 제7장 운전보안장치
 * 
 * 학습 목표:
 * - ATS/ATC/ATO의 원리와 차이점 이해
 * - 주요 계전기의 역할 및 동작 조건 숙지
 * - 비상제동 복귀 시퀀스 및 특수 스위치 취급법 파악
 */

const CHAPTER_EMU_CH7 = {
    id: 'emu_ch7',
    name: '운전보안장치',
    order: 7,
    sections: [
        {
            id: 'emu_ch7_s1',
            title: '운전보안장치 개요',
            content: `## 운전보안장치의 목적

- 열차 간 충분한 이격 거리 유지
- 지시속도 초과 시 자동 정지
- 정지신호 무단 진입 방지

## 폐색 방식의 진화

| 방식 | 특징 | 예시 |
|------|------|------|
| **고정폐색** | 궤도회로 기반 구간 제어 | ATS, ATC |
| **이동폐색(MBS)** | 무선통신 실시간 간격 제어 | RF-CBTC |

## Fail-Safe 원칙

> 고장 시 **정지신호 현시** 또는 **소등**하여 가장 안전한 측으로 작동

## ATC 이중계 구성
- 주장치(ATC1)와 보조장치(ATC2) 병렬 모드
- 상호 감시 및 고장 시 자동 절체`,
            keyTerms: ['고정폐색', '이동폐색', 'MBS', 'Fail-Safe', 'ATC 이중계'],
            relatedQuestions: []
        },
        {
            id: 'emu_ch7_s2',
            title: 'ATS 동작 원리',
            content: `## ATS (Automatic Train Stop)

지상자에서 발신하는 **지시속도 주파수(Vp)**와 차축의 **속도발전기**에서 검지한 실제속도(Vt)를 비교

### 속도 초과 시 동작
- 비상제동 자동 체결
- 경고 벨 및 표시등 작동

## ATS 상시 발진 주파수
> **78kHz** - 각 출력 계전기(PR) 유지전원

## ATS 공진주파수표

| 신호 | 주파수 | 지시속도 |
|------|--------|----------|
| 진행(G) | 98kHz | Free |
| 감속(YG) | 98kHz | 65km/h |
| **주의(Y)** | **106kHz** | **45km/h** |
| 경계(YY) | 114kHz | 25km/h |
| 허용정지(R1) | 122kHz | 0km/h |
| 절대정지(R0) | 130kHz | 즉시 정지 |
| 절연구간 | 68kHz | 60km/h 이하 |`,
            keyTerms: ['ATS', '78kHz', '98kHz', '106kHz', '114kHz', '122kHz', '130kHz'],
            relatedQuestions: ['emu_701']
        },
        {
            id: 'emu_ch7_s3',
            title: 'ATS 주요 계전기',
            content: `## ATS 핵심 계전기

### AESR (초과속도 계전기)
- 지시속도 > 실제속도: **여자**
- 실제속도 > 지시속도: **무여자** → 경고 벨, 비상제동

### ATSEBR (비상제동 계전기)
- 평소: **무여자** (정상)
- 속도 초과/정지신호 진입: **여자** → 비상제동

### FDR (고장 검지 계전기)
- ATS 장치 자체 고장 검지
- 진행(G) 구간에서는 동작해도 비상제동 **미체결**

### SDR (정지 검지 계전기)
- 속도 **5km/h 이하**: 여자
- 정차 상태 확인, 비상제동 복귀 조건

### BMR (비상제동 기억 계전기)
- 비상제동 동작 시: **여자**
- 복귀: 제동핸들 **비상(EB) 위치**로 무여자

### NSR (무신호 계전기)
- 신호 수신: 여자
- 무신호/R0 수신: **무여자** → 즉시 비상제동`,
            keyTerms: ['AESR', 'ATSEBR', 'FDR', 'SDR', 'BMR', 'NSR', '5km/h'],
            relatedQuestions: ['emu_703']
        },
        {
            id: 'emu_ch7_s4',
            title: 'ATS 확인제동 및 비상제동 복귀',
            content: `## 확인제동 (Acknowledgment)

속도 초과 시 **3초 이내**에 제동핸들 **4단 이상** 취급
→ ABR 여자 → 비상제동 체결 방지

## ATS 비상제동 복귀 시퀀스

### 복귀 순서
1. 열차 **정차** (SDR 여자)
2. 제동핸들 **비상(EB) 위치** → BMR 무여자
3. 제동핸들 **7단 위치** → BER 여자
4. 루프 회로 재구성 → 제동 완해

### 체크 포인트
> EB 위치로 BMR 무여자 후, 반드시 7단에서 BER 여자

## 초기설정 현상
기동 시 지상자 미검지 → **45km/h** 자동 설정
→ R0등 순간 점등, Alarm Bell 후 정상화`,
            keyTerms: ['확인제동', '3초', '4단', 'BMR', 'BER', '7단', '45km/h'],
            relatedQuestions: ['emu_703']
        },
        {
            id: 'emu_ch7_s5',
            title: 'ATS 특수 스위치 및 차단기',
            content: `## 15KS (15km/h 스위치)

### 사용 상황
- 허용정지(R1) 구간 진입
- R1 위반 시

### 취급 조건
제동 **4단 이상**에서 취급

---

## ASOS (ATS 특수운전 스위치)

### 사용 상황
- 절대정지(R0) 구간 통과 (관제 승인 후)
- 유도신호 운전
- 지상장치 고장

### 취급 시 설정
**45km/h** 자동 설정

---

## ATS 차단기

| 차단기 | 역할 | 차단 시 |
|--------|------|---------|
| **ATSN1** | 전원 공급 | 비상제동 즉시 체결, R0등 점등 |
| **ATSN2** | 비상제동 제어/경보 | 비상제동 기능 **상실**, ATS OFF등 점등 |

## ATSCOS (ATS 차단 스위치)
- 장치 고장/완해 불능 시 관제 승인 후 취급
- 비상 루프 By-Pass하여 완해`,
            keyTerms: ['15KS', 'ASOS', 'ATSN1', 'ATSN2', 'ATSCOS', 'R0', 'R1'],
            relatedQuestions: ['emu_705', 'emu_707']
        },
        {
            id: 'emu_ch7_s6',
            title: 'ATC 동작 원리',
            content: `## ATC (Automatic Train Control)

차내신호 폐색 방식으로 **모든 속도 구간 감시**

### ATS와의 차이
| 구분 | ATS | ATC |
|------|-----|-----|
| 신호 방식 | 지상 신호기 | 차내 신호 |
| 제동 | 비상제동 | **상용 7단 제동** |
| 속도 초과 시 | 비상 체결 | 자동 감속 |

## ATC 주파수

### 지시속도 수신
> **990Hz** (레일 → Pick Up Coil → Decoder)

### 실제속도 검지
> **48Hz/km/h** (속도발전기)

## ATC 속도 코드표

| 속도 | 코드 주파수 |
|------|-------------|
| 25km/h (구내) | 3.2Hz |
| 25km/h (본선) | 5.0Hz |
| 40km/h | 6.6Hz |
| 60km/h | 8.6Hz |
| 70km/h | 10.8Hz |
| **80km/h** | **13.6Hz** |
| 100km/h | 20.4Hz |`,
            keyTerms: ['ATC', '990Hz', '48Hz', '차내신호', '상용 7단', '13.6Hz'],
            relatedQuestions: ['emu_704']
        },
        {
            id: 'emu_ch7_s7',
            title: 'ATC 주요 계전기',
            content: `## ATC 핵심 계전기

### US (저속도 계전기)
- Vp > Vt: **여자** (정상)
- Vt > Vp: **무여자** → 상용 7단 제동

### ATCEBR (ATC 비상제동 계전기)
- 평소: **상시 여자**
- 고장/제동력 부족: **무여자** → 비상제동 루프 차단

### BA (제동력 보장 계전기)
- 상용 7단 제동 시 **3초 이내** 감속도 확인
- 기준: **2.4km/h/sec 이상**
- 미달 시 → 비상제동 전환

### ACK (제동확인 계전기)
- 제동핸들 1~7단: 여자
- 경보 정지, US 재여자 조건

### VZ (정지속도 계전기)
- 속도 **5km/h 이하**: 여자
- 정지 검지, 출입문 연동

### YARD2 (구내운전 계전기)
- 3.2Hz 수신 시 설정
- 구내 **25km/h** 이하 운전

### SC (지시속도 계전기)
- 본선 신호 수신 시 여자
- YARD2 해제 → 본선 모드 전환`,
            keyTerms: ['US', 'ATCEBR', 'BA', 'ACK', 'VZ', 'YARD2', 'SC', '2.4km/h/sec'],
            relatedQuestions: ['emu_702', 'emu_706']
        },
        {
            id: 'emu_ch7_s8',
            title: 'ATC 특수 기능 및 차단기',
            content: `## ATC 전원 공급 장치 (PSU)

- 입력: 103선 DC 100V
- 출력: DC 32V, DC 15V

## ATC 차단기

| 차단기 | 역할 | 차단 시 |
|--------|------|---------|
| ATCN | 메인 전원 | ADU 무현시, 비상제동 |
| ATCPSN | PSU 보호 | ADU 무현시, 비상제동 |

## ATCCOS (ATC 차단 스위치)
- 장치 고장 시 비상 루프 By-Pass
- 지령 운전: TGIS 속도 확인, **45km/h 이하** 운전

## ADU 표시등

| 표시등 | 색상 | 의미 |
|--------|------|------|
| YARD등 | 황색 | 구내 운전 모드 |
| STOP등 | 적색 | 본선 지시속도 상실, 정차 |

## 8초 Alarm
- ADU에 15km/h 현시 (정지 후 진행 모드)
- 주기적 경보 발생`,
            keyTerms: ['PSU', 'ATCN', 'ATCPSN', 'ATCCOS', 'ADU', 'YARD등', 'STOP등', '8초 Alarm'],
            relatedQuestions: []
        },
        {
            id: 'emu_ch7_s9',
            title: 'ATO/ATP 및 첨단 시스템',
            content: `## ATO (Automatic Train Operation)

자동 열차 운전 시스템

### 자동 수행 기능
- 출발, 가속
- 정속 주행
- 감속
- 정밀 정차 (오차 **±35cm 이내**)

## ATP (Automatic Train Protection)

### 목표거리 운행 (Distance to go)
- 최소 제동거리 유지
- 안전 강화 속도제어

## HMI (차내신호 정보 표시장치)
- 기관사-열차 제어 시스템 인터페이스
- 터치 방식 운전 취급

## TWC / TRA 장치

| 장치 | 기능 |
|------|------|
| TWC | 지상 설비와 무선 정보 교환 |
| TRA | 정거장 정지 위치 코드 검지 → 정밀 정차 |

## ONE 핸들 주간제어기
- 동력 운전 + 제동 취급 일원화
- ATO 도입과 함께 적용`,
            keyTerms: ['ATO', 'ATP', 'HMI', 'TWC', 'TRA', '±35cm', 'ONE 핸들'],
            relatedQuestions: []
        }
    ]
};

console.log('Chapter emu_ch7 loaded');
